"use strict";define(function(){function e(e,n){var t=e%n;return 0>t&&(t+=n),t}function n(e,n){var t="on"+n;"function"==typeof e[t]&&e[t]({type:n})}function t(e){e.delay&&(e.timer=setTimeout(function(){delete e.timer,e.slideTo(e.current+1)},e.delay))}var i=function(e,n,t,o){var s,a,r,d;if(!(this instanceof i))return new i(e,n,t,o);if(r=this,this.pushStack=[],this.removeStack=[],this.container=e,this.nav=o,e.on("mouseover",function(){d=r.delay,r.stopPlay()}),e.on("mouseout",function(){r.startPlay(d),d=undefined}),o&&(o.css("display","none"),o.on("click",">a",function(){var e,n;if(!$(this).hasClass("current"))for(n=o.find(">a"),e=0;n.length>e;e++)if(n[e]===this){r.slideTo(e);break}})),n instanceof Array&&n.length>0){for(this.children=n,this.current="number"==typeof t&&t>=0&&n.length>t?t:0,s=0;n.length>s;s++)e.append(n[s]),o&&(a=$('<a href="javascript:;"></a>'),o.append(a)),s!==this.current?n[s].css("display","none"):a&&a.addClass("current");o&&n.length>1&&o.css("display","")}else this.current=undefined,this.children=[]};return i.prototype.add=function(e){var t,i;return this.sliding?this.pushStack.push(e):(t=this.children.length,this.container.append(e),this.children.push(e),this.nav&&(i=$('<a href="javascript:;"></a>'),this.nav.append(i)),0===t?(this.current=0,this.nav&&i.addClass("current"),n(this,"change")):(e.css("display","none"),this.nav&&this.nav.css("display",""))),t},i.prototype.remove=function(t){var i;return this.sliding?this.removeStack.push("number"==typeof t?this.children[t]:t):this.children.length>0&&("number"!=typeof t&&(t=this.children.indexOf(t)),t=e(t,this.children.length),i=this.children.splice(t,1)[0],i.remove(),this.nav&&this.nav.find(">a").eq(t).remove(),this.current!==t&&this.current!==this.children.length||(this.children.length>0?(this.current=e(t,this.children.length),this.children[this.current].css("display",""),this.nav&&this.nav.find(">a").eq(this.current).addClass("current")):this.current=undefined,n(this,"change")),1===this.children.length&&this.nav&&this.nav.css("display","none")),i},i.prototype.slideTo=function(i,o){var s,a,r=this;return!this.sliding&&this.children.length>1?(i=e(i,this.children.length),i!==this.current?(this.timer&&(clearTimeout(this.timer),this.timer=undefined),o?(this.children[this.current].css("display","none"),this.children[i].css("display",""),t(this)):(this.sliding=!0,this.children[this.current].fadeOut(function(){r.children[r.current].fadeIn(function(){r.sliding=!1,t(r)})})),this.nav&&(a=this.nav.find(">a"),$(a[this.current]).removeClass("current"),$(a[i]).addClass("current")),this.current=i,n(this,"change"),s=!0):s=!1):s=!1,s},i.prototype.startPlay=function(e){this.stopPlay(),this.delay=e,t(this)},i.prototype.stopPlay=function(){var e;return this.delay?(delete this.delay,this.timer&&(clearTimeout(this.timer),delete this.timer),e=!0):e=!1,e},i});